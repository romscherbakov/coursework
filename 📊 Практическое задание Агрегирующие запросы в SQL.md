# 📊 Практическое задание: Агрегирующие запросы в SQL

## 🎯 Цель задания
Освоить работу с операторами `DISTINCT`, `GROUP BY` и агрегирующими функциями (`COUNT`, `SUM`, `AVG`) в различных комбинациях.

---

## 📚 Изучаемые операторы
- ✅ `DISTINCT`
- ✅ `GROUP BY` 
- ✅ `GROUP BY + COUNT`
- ✅ `GROUP BY + SUM`
- ✅ `GROUP BY + WHERE`
- ✅ `GROUP BY + HAVING`
- ✅ `GROUP BY Multiple`

---

## 🗃️ Структура базы данных
Работаем с базой `test3`, которая содержит таблицы:
- `departments` - отделы компании
- `workers` - сотрудники
- `salaries` - зарплаты
- `tasks` - задачи
- `tags` - теги
- `tags_tasks` - связь тегов и задач
- `projects` - проекты

---

## 📝 Основные задания

### 1. Уникальные отделы
Вывести список всех уникальных отделов компании.

### 2. Суммы зарплат по сотрудникам
Подсчитать общую сумму зарплат для каждого сотрудника.

### 3. Средние зарплаты до марта
Вывести средние суммы зарплат сотрудников за период до марта 2020 года, отсортированные от больших к меньшим.

### 4. Средние зарплаты по месяцам
Вывести средние суммы зарплат по каждому месяцу.

### 5. Суммы зарплат по месяцам с фильтром
Вывести суммы всех зарплат по месяцам, в которых общая сумма зарплат больше или равна 2000.

### 6. Количество тегов по задачам
Подсчитать количество тегов для каждой задачи и вывести в порядке убывания количества.

### 7. Второй по популярности тег
Найти идентификатор второго по популярности тега (по количеству использований в задачах).

### 8. Количество завершенных задач по сотрудникам
Для каждого сотрудника (кроме `worker_id = 11, 12`) вывести количество завершенных задач.

### 9. Суммы зарплат по датам
Вывести сумму зарплат по каждому месяцу и дню в месяце.

---

## 🧠 Дополнительные задания

### 10. Количество сотрудников по отделам
Посчитать количество сотрудников в каждом отделе.

### 11. Задачи по проектам
Вывести количество задач для каждого проекта, отсортировать по убыванию.

### 12. Среднее время выполнения задач
Для каждого сотрудника вывести среднее время выполнения завершенных задач (разница между `end_at` и `started_at`).

### 13. Проекты с большим количеством тегов
Найти проекты, у задач которых в среднем больше 2 тегов.

### 14. Зарплатные периоды с высокой активностью
Вывести месяцы, в которых было начислено зарплат больше средней месячной суммы.

---

## 💡 Подсказки

- Используйте `DISTINCT` для получения уникальных значений
- `GROUP BY` группирует данные по указанным столбцам
- `HAVING` фильтрует результаты группировки (аналог `WHERE` для `GROUP BY`)
- Агрегирующие функции: `COUNT()`, `SUM()`, `AVG()`, `MAX()`, `MIN()`
- Для работы с датами используйте `YEAR()`, `MONTH()`, `DAY()`

---

## 📊 Пример формата ответа

Для каждого задания напишите SQL-запрос:

```sql
-- Задание 1: Уникальные отделы
SELECT DISTINCT name FROM departments;
```

**Удачи в выполнении заданий!** 🚀

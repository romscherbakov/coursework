
# 📚 Практикум: Функции и операции в SQL 

## 🎯 Цель задания
Освоить работу с различными типами функций и операциями объединения в SQL-запросах.

---

## 📊 Изучаемые темы
- ✅ **Агрегационные функции** (`MAX`, `MIN`, `AVG`, `COUNT`, `SUM`)
- ✅ **Строковые функции** (`REPLACE`, `CONCAT`, `SUBSTRING`)
- ✅ **Математические функции** (`ROUND`, `ABS`, `MOD`, `FLOOR`)
- ✅ **Функции работы с датами** (`DATE`, `MONTH`, `YEAR`, `DATEDIFF`)
- ✅ **Операции объединения** (`UNION`, `UNION ALL`)
- ✅ **Псевдонимы** (`AS`)

---

## 🗃️ Структура базы данных
Работаем с базой `departments`, которая содержит таблицы:
- `workers` - сотрудники
- `salaries` - зарплаты
- `tasks` - задачи
- `tags` - теги
- `tags_tasks` - связь тегов и задач

---

## 📝 Основные задания

### 🔹 Агрегационные функции

**1. Максимальная зарплата**  
Выбрать максимальную зарплату за всё время.

**2. Средняя зарплата за март**  
Выбрать среднюю зарплату за март 2020 года.

**3. Количество выплат**  
Найти количество всех выплат с начала января по конец февраля 2020 года.

**4. Сумма зарплат 10 числа**  
Выбрать сумму всех зарплат, выплаченных 10 числа любого месяца.

**5. Количество тегов для задач**  
Подсчитать количество тегов, которые относятся к задачам с id = 10, 13, 22.

**6. Процент выполненных задач**  
Подсчитать процент выполненных задач, поставленных в январе 2020 года.

---

### 🔹 Строковые функции

**7. Замена в описаниях**  
Выбрать описания всех задач, заменив "Починить" на "Исправить".

**8. Короткие имена сотрудников**  
Выбрать короткое имя сотрудника (например, не "Збруев Роман", а "Збруев Р.").

**9. Первые буквы отделов**  
Вывести первые три буквы названия каждого отдела.

---

### 🔹 Функции дат и времени

**10. Время максимальной выплаты**  
Выбрать время, когда была выплачена максимальная зарплата за февраль 2020.

**11. Среднее время выполнения**  
Выбрать среднее время исполнения задачи за всё время (в минутах).

**12. Кварталы создания задач**  
Вывести количество задач, созданных в каждом квартале 2020 года.

---

### 🔹 Математические функции

**13. Ближайшие к 330 зарплаты**  
Выбрать 5 зарплат максимально близких к 330.

**14. Разница от средней**  
Для каждой зарплаты вывести разницу между зарплатой и средней зарплатой по всем выплатам.

---

## 🧩 Задания на UNION

**15. Объединение отделов и проектов**  
Вывести объединенный список названий отделов и проектов.

**16. Зарплаты в диапазонах**  
Разделите все зарплаты на три категории: "Высокая" (>500), "Средняя" (300-500) и "Низкая" (<300), и объедините их в один список, отсортированный по категориям и убыванию суммы.

**17. Фильтрованное объединение отделов**  
Объединить список сотрудников отдела разработки (id=1) и отдела дизайна (id=2).

**18. Объединение зарплатных периодов**  
Объединить список зарплат за январь и февраль 2020 года.

**19. Задачи по статусам через UNION**  
Объединить список завершенных и незавершенных задач с указанием статуса в отдельном столбце.

---

## 🎮 Ещё задачки

**20. Дни недели создания задач**  
Вывести количество задач, созданных в каждый день недели.

**21. Длина описаний задач**  
Вывести id задачи и длину её описания в символах, отсортировать по убыванию длины.

**22. Зарплаты в разных валютах**  
Вывести зарплаты в условных "евро" (курс 0.85) и "йенах" (курс 110).

**23. Возраст задач**  
Вывести сколько дней прошло с момента создания каждой задачи на текущую дату.

---

## 💡 Подсказки и советы

### Для агрегационных функций:
```sql
SELECT MAX(column) FROM table;
SELECT AVG(column) FROM table WHERE condition;
```

### Для строковых функций:
```sql
SELECT REPLACE(description, 'старое', 'новое') FROM tasks;
SELECT CONCAT(last_name, ' ', SUBSTRING(first_name, 1, 1), '.') FROM workers;
SELECT LEFT(name, 3) FROM departments;
```

### Для работы с датами:
```sql
SELECT DATEDIFF(NOW(), created_at) AS days_passed;
SELECT DAYNAME(created_at) AS weekday;
SELECT QUARTER(created_at) AS quarter;
```

### Для математических функций:
```sql
SELECT ABS(salary - 330) AS difference FROM salaries;
SELECT ROUND(salary * 0.85, 2) AS salary_eur FROM salaries;
```

### Для UNION:
```sql
SELECT name FROM departments
UNION
SELECT name FROM projects
ORDER BY name;
```
---

## 📝 Формат выполнения

Для каждого задания напишите SQL-запрос в формате:

```sql
-- Задание 1: Максимальная зарплата
SELECT MAX(salary) AS max_salary FROM salaries;
```

**Желаю успехов в выполнении заданий!** 🚀

*P.S. Не забывайте использовать псевдонимы (AS) для лучшей читаемости результатов!*
